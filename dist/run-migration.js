import { runFullMigration } from './migrations/01_create_users_table.js';
import { runRobustAuthMigration } from './migrations/02_robust_auth_schema.js';
import { runPermissionsMigration } from './migrations/03_permissions_schema.js';
import { runAdminRobustnessMigration } from './migrations/04_admin_robustness.js';
import { runFaturixMigration } from './migrations/06_faturix_schema.js';
import { runSecurityUpdatesMigration } from './migrations/05_security_updates.js';
import { runBase64Migration } from './migrations/07_add_file_base64.js';
import { runNormalizeDocumentsMigration } from './migrations/08_normalize_documents_table.js';
import { runNormalizeTransactionsMigration } from './migrations/09_normalize_transactions_table.js';
import { runForceDocumentsTableRecreation } from './migrations/10_force_documents_recreation.js';
import { runFixAuditLogsMigration } from './migrations/12_fix_audit_logs_schema.js';
import { runRestoreMissingDocumentFieldsMigration } from './migrations/13_restore_missing_document_fields.js';
import { runAddDocumentResolutionFieldsMigration } from './migrations/15_add_document_resolution_fields.js';
import { runAddExtendedCompanyFieldsMigration } from './migrations/16_add_extended_company_fields.js';
import { runAddUserPromptsMigration } from './migrations/17_add_user_prompts.js';
import { runSplitUserPromptsMigration } from './migrations/18_split_user_prompts.js';
import { runFixForcePasswordDefaultMigration } from './migrations/19_fix_force_password_default.js';
import { runDropAgentPromptsMigration } from './migrations/20_drop_agent_prompts_col.js';
import { runFiscalEntitiesMigration } from './migrations/21_fiscal_entities_schema.js';
import { runFiscalEntitiesCompanyIdMigration } from './migrations/22_fiscal_entities_company_id.js';
import { runCreateFiscalAnalyticsViewMigration } from './migrations/23_create_fiscal_analytics_view.js';
import { runFixFiscalFunctionsFilterMigration } from './migrations/24_fix_fiscal_functions_filter.js';
import { runCreateAiAlertsTableMigration } from './migrations/25_create_ai_alerts_table.js';
import { runSystemLogsTableMigration } from './migrations/11_system_logs_table.js';
import { runAddMissingCompanyColsMigration } from './migrations/26_add_missing_company_cols.js';
import { runAddOwnerIdToCompaniesMigration } from './migrations/27_add_owner_id_to_companies.js';
import { runFixFiscalEntitiesSchemaMigration } from './migrations/28_fix_fiscal_entities_schema.js';
import { runAddMissingFiscalColsMigration } from './migrations/29_add_missing_fiscal_cols.js';
import { runAddRetentionAndVatProcMigration } from './migrations/30_add_retention_and_vat_proc.js';
import { runFixUsersSchemaAlignmentMigration } from './migrations/32_fix_users_schema_alignment.js';
import { runFixCompanyStatusConstraintMigration } from './migrations/34_fix_company_status_constraint.js';
import { runAddTransactionsMetadataMigration } from './migrations/35_add_transactions_metadata.js';
import { runCreatePlansTableMigration } from './migrations/44_create_plans_table.js';
import { runRealtimeSessionsMigration } from './migrations/45_realtime_sessions.js';
import { runCreateCreditPackagesTableMigration } from './migrations/46_create_credit_packages_table.js';
import { runCreateOperationalCostsTableMigration } from './migrations/47_create_operational_costs_table.js';
import { runCreateAnalysisCostsTableMigration } from './migrations/48_create_analysis_costs_table.js';
import { runCreateFinancialSnapshotsTableMigration } from './migrations/49_create_financial_snapshots_table.js';
import { runExpandTransactionsPlansTablesMigration } from './migrations/50_expand_transactions_plans_tables.js';
import { runPurchaseColumnsMigration } from './migrations/51_add_purchase_columns.js';
import { runSystemSettingsTableMigration } from './migrations/52_create_system_settings.js';
import { runAgentPromptsMigration } from './migrations/53_create_agent_prompts.js';
import { runAddActiveStatusToAgentsMigration } from './migrations/54_add_active_status_to_agents.js';
import { runHealingBillingMigration } from './migrations/99_healing_billing.js';
import { runPlansToCreditsMigration } from './migrations/55_plans_to_credits.js';
import { runHealTransactionsMigration } from './migrations/100_heal_transactions_table.js';
(async () => {
    try {
        console.log('[MIGRATION_RUNNER] Starting migrations...');
        await runFullMigration();
        await runRobustAuthMigration();
        await runPermissionsMigration();
        await runAdminRobustnessMigration();
        await runFaturixMigration();
        await runSecurityUpdatesMigration();
        await runBase64Migration();
        await runNormalizeDocumentsMigration();
        await runNormalizeTransactionsMigration();
        await runForceDocumentsTableRecreation();
        await runSystemLogsTableMigration();
        await runFixAuditLogsMigration();
        await runRestoreMissingDocumentFieldsMigration();
        await runAddDocumentResolutionFieldsMigration();
        await runAddExtendedCompanyFieldsMigration();
        await runAddUserPromptsMigration();
        await runSplitUserPromptsMigration();
        await runFixForcePasswordDefaultMigration();
        await runDropAgentPromptsMigration();
        await runFiscalEntitiesMigration();
        await runFiscalEntitiesCompanyIdMigration();
        await runCreateFiscalAnalyticsViewMigration();
        await runFixFiscalFunctionsFilterMigration();
        await runCreateAiAlertsTableMigration();
        await runAddMissingCompanyColsMigration();
        await runAddOwnerIdToCompaniesMigration();
        await runFixFiscalEntitiesSchemaMigration();
        await runAddMissingFiscalColsMigration();
        await runAddRetentionAndVatProcMigration();
        await runFixUsersSchemaAlignmentMigration();
        await runFixCompanyStatusConstraintMigration();
        await runAddTransactionsMetadataMigration();
        await runCreatePlansTableMigration();
        await runRealtimeSessionsMigration();
        await runCreateCreditPackagesTableMigration();
        await runCreateOperationalCostsTableMigration();
        await runCreateAnalysisCostsTableMigration();
        await runCreateFinancialSnapshotsTableMigration();
        await runExpandTransactionsPlansTablesMigration();
        await runPurchaseColumnsMigration();
        await runSystemSettingsTableMigration();
        await runAgentPromptsMigration();
        await runAddActiveStatusToAgentsMigration();
        await runPlansToCreditsMigration();
        // Healing and Defaults (Run last usually)
        await runHealingBillingMigration();
        await runHealTransactionsMigration();
        console.log('[MIGRATION_RUNNER] All migrations executed successfully.');
        process.exit(0);
    }
    catch (e) {
        console.error('[MIGRATION_RUNNER] Migration failed:', e);
        process.exit(1);
    }
})();
